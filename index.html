<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Santos Slot Machine</title>
  <meta name="theme-color" content="#222222">
  <!-- Link to external manifest.json -->
  <link rel="manifest" href="manifest.json">
  <style>
    html, body { height: 100%; margin: 0; padding: 0; }
    body {
      font-family: sans-serif;
      background: radial-gradient(circle, #222 0%, #111 100%);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container { width: 100%; max-width: 500px; padding: 10px; box-sizing: border-box; text-align: center; }
    .header { text-align: right; font-size: 1.2em; margin-bottom: 10px; }
    .machine { background: #333; border: 5px solid #888; border-radius: 15px; box-shadow: 0 0 20px #000 inset; padding: 20px; }
    .reels { display: flex; justify-content: center; margin: 20px 0; }
    .reel { font-size: 80px; margin: 0 10px; width: 80px; text-align: center; }
    button { font-size: 1.2em; padding: 10px 20px; margin: 5px; }
    #payoutChart p { margin: 4px 0; }
    #hash { display: none; }
    #history { margin-top: 20px; text-align: left; max-height: 200px; overflow-y: auto; }
    .entry { font-size: 0.9em; margin: 4px 0; color: #ccc; }
    .show-hash { cursor: pointer; color: #0af; text-decoration: underline; margin-left: 8px; font-size: 0.9em; }
    .hashText { display: none; font-size: 0.8em; color: #888; }
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; }
    .modal { background: #333; padding: 20px; border-radius: 10px; max-width: 300px; width: 90%; text-align: center; }
    .modal input { width: 100%; margin: 10px 0; padding: 8px; font-size: 1em; border: none; border-radius: 4px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div id="playerInfo"></div>
      <button id="cashOutBtn" style="display:none;" onclick="cashOut()">Cash Out</button>
    </div>
    <div class="machine">
      <h1 style="color: gold; text-shadow: 2px 2px #000; margin: 0;">Santos Slot Machine</h1>
      <div id="payoutChart">
        <h3>Payout Chart ($1 per spin)</h3>
        <p>Three 7's ‚Üí $5</p>
        <p>Three üíé ‚Üí $4</p>
        <p>Three üçí ‚Üí $3</p>
        <p>Three üçã ‚Üí $2</p>
        <p>Three üîî ‚Üí $1</p>
      </div>
      <div class="reels">
        <div class="reel" id="reel1">?</div>
        <div class="reel" id="reel2">?</div>
        <div class="reel" id="reel3">?</div>
      </div>
      <button id="spinBtn" onclick="spin()" disabled>Pull Lever</button>
      <p id="result" style="font-size:1.2em; margin:10px 0;"></p>
      <p id="hash"></p>
      <button id="historyToggleBtn" onclick="toggleHistory()">Show History</button>
    </div>
    <div id="history" style="display:none;"></div>
  </div>  <!-- Start Game Modal -->  <div id="startModal" class="modal-overlay">
    <div class="modal">
      <h2>Start Game</h2>
      <input id="playerNameInput" placeholder="Enter your name" />
      <input id="pullsInput" type="number" placeholder="Number of pulls" min="1" />
      <button onclick="startGame()">Start</button>
    </div>
  </div>  <!-- End Session Modal -->  <div id="endModal" class="modal-overlay" style="display:none;">
    <div class="modal">
      <h2>Game Over</h2>
      <p id="endMessage" style="font-size:1.2em;"></p>
      <button onclick="location.reload()">Play Again</button>
    </div>
  </div>  <script>
    // Register external service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
    // PWA install prompt
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  // Show install button when prompt is available
  const installBtn = document.getElementById('installBtn');
  if (installBtn) installBtn.style.display = 'inline-block';
});
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(() => deferredPrompt = null);
    });

    // Game logic unchanged...
    // (rest of the script remains the same as before)
  </script></body>
</html>